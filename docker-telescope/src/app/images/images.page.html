<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title> Images</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">
        <ion-icon aria-hidden="true" ios='document-text-outline' md="document-text-sharp"></ion-icon>
        Images
      </ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-list *ngIf="dockerIOService.images.length>0; else elseBlock">
    <ion-item *ngFor="let image of dockerIOService.images">
      <ion-label *ngIf="image.RepoTags">{{image.RepoTags[0]}}</ion-label>
      <ion-label *ngIf="!image.RepoTags">{{image.Id}}</ion-label>
      <ion-button (click)="setOpenDetails(true); this.itemSelected = image" slot="end">
        <ion-icon name="information-circle-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>
  <ng-template #elseBlock>
    <div id="container">
      <strong class="capitalize">
        <ion-icon aria-hidden="true" ios='document-text-outline' md="document-text-sharp"></ion-icon>
        Aucun images à afficher.</strong>
      <p>En cas de problèmes d’affichage, Vérifier que le socket Docker est bien paramétré et que des containers sont en
        fonctionnement.</p>
    </div>
  </ng-template>
  <ion-modal [isOpen]="isModalDetailsOpen">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title *ngIf="itemSelected.RepoTags">{{itemSelected.RepoTags[0]}}</ion-title>
          <ion-title *ngIf="!itemSelected.RepoTags">{{itemSelected.Id}}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="setOpenDetails(false)">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ul>
          <li>Id: {{itemSelected.Id}}</li>
          <li>ParentId: {{itemSelected.ParentId}}</li>
          <li>RepoTags:
            <ul *ngFor="let RepoTag of itemSelected.RepoTags">
              <li>{{RepoTag}}</li>
            </ul>
          </li>
          <li>RepoDigest:
            <ul *ngFor="let RepoDigest of itemSelected.RepoDigests">
              <li>{{RepoDigest}}</li>
            </ul>
          </li>
          <li>Created: {{itemSelected.Created}}</li>
          <li>Size: {{itemSelected.Size}}</li>
          <li>VirtualSize: {{itemSelected.VirtualSize}}</li>
          <li>SharedSize: {{itemSelected.SharedSize}}</li>
          <li>Containers: {{itemSelected.Containers}}</li>
        </ul>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
